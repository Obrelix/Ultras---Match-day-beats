<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultras - Match day beats</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <canvas id="crowd-bg"></canvas>
    <div id="game-container">
        <!-- Title Screen -->
        <div id="title-screen" class="screen active">
            <h1>⚽ Ultras - Match day beats ⚽</h1>
            <p class="subtitle">Match the rhythm. Outsing the opposition.</p>
            <button id="start-btn" class="btn-primary">START GAME</button>
        </div>

        <!-- Mode Select Screen -->
        <div id="mode-select-screen" class="screen">
            <h2>Select Mode</h2>
            <div id="mode-grid">
                <div class="mode-card" id="mode-practice">
                    <div class="mode-icon">&#9835;</div>
                    <div class="mode-title">Practice</div>
                    <div class="mode-desc">Pick a chant and perfect your rhythm</div>
                </div>
                <div class="mode-card" id="mode-matchday">
                    <div class="mode-icon">&#9917;</div>
                    <div class="mode-title">Match Day</div>
                    <div class="mode-desc">Play a full match — 6 chants, 2 halves, goals on the line</div>
                </div>
            </div>
            <div id="difficulty-selector">
                <span>Difficulty:</span>
                <div id="difficulty-options">
                    <button class="difficulty-btn" data-difficulty="easy">Easy</button>
                    <button class="difficulty-btn active" data-difficulty="normal">Normal</button>
                    <button class="difficulty-btn" data-difficulty="hard">Hard</button>
                </div>
            </div>
            <button id="back-to-title-from-mode" class="btn-secondary">Back</button>
        </div>

        <!-- Club Selection Screen -->
        <div id="club-select-screen" class="screen">
            <h2>Choose Your Club</h2>
            <div id="club-grid"></div>
            <button id="back-to-title" class="btn-secondary">Back</button>
        </div>

        <!-- Chant Selection Screen -->
        <div id="chant-select-screen" class="screen">
            <h2>Select a Chant</h2>
            <div id="selected-club-banner"></div>
            <div id="chant-list"></div>
            <button id="back-to-clubs" class="btn-secondary">Back</button>
        </div>

        <!-- Match Day Intro Screen -->
        <div id="matchday-intro-screen" class="screen">
            <h2>MATCH DAY</h2>
            <div id="matchup-display">
                <div class="matchup-team">
                    <div class="matchup-badge" id="matchup-player-badge"></div>
                    <div class="matchup-name" id="matchup-player-name"></div>
                </div>
                <div class="matchup-vs">VS</div>
                <div class="matchup-team">
                    <div class="matchup-badge" id="matchup-rival-badge"></div>
                    <div class="matchup-name" id="matchup-rival-name"></div>
                </div>
            </div>
            <button id="kickoff-btn" class="btn-primary">KICK OFF</button>
        </div>

        <!-- Gameplay Screen -->
        <div id="gameplay-screen" class="screen">
            <button id="pause-btn" class="icon-btn" title="Pause">&#9208;</button>

            <div id="scoreboard">
                <div id="player-score-box" class="score-box">
                    <img id="player-score-badge" class="score-badge" src="" alt="">
                    <span id="player-score-label" class="score-label">YOU</span>
                    <span id="player-score" class="score-value">0</span>
                </div>
                <div id="scoreboard-center">
                    <div id="vs-divider">VS</div>
                    <div id="match-info" class="hidden">
                        <span id="match-score-player">0</span>
                        <span class="match-score-sep">-</span>
                        <span id="match-score-ai">0</span>
                        <span class="match-score-divider">|</span>
                        <span id="match-half-label">1st Half</span>
                        <span class="match-score-divider">|</span>
                        <span id="match-chant-progress">Chant 1/3</span>
                    </div>
                </div>
                <div id="ai-score-box" class="score-box">
                    <img id="ai-score-badge" class="score-badge" src="" alt="">
                    <span id="ai-score-label" class="score-label">RIVAL</span>
                    <span id="ai-score" class="score-value">0</span>
                    <div id="ai-score-popup-container"></div>
                </div>
            </div>

            <div id="chant-display">
                <span id="current-chant-name"></span>
            </div>

            <canvas id="game-canvas"></canvas>

            <div id="input-hint">Press SPACEBAR or TAP on the beat!</div>

            <div id="volume-controls">
                <button id="volume-toggle" class="icon-btn" title="Settings">&#9881;</button>
                <div id="volume-panel" class="hidden">
                    <label>Music <input type="range" id="volume-slider" min="0" max="100" value="100"></label>
                    <label>SFX <input type="range" id="sfx-volume-slider" min="0" max="100" value="50"></label>
                    <label class="toggle-label">
                        <input type="checkbox" id="reduced-effects-toggle">
                        Reduce Effects
                    </label>
                </div>
            </div>
        </div>

        <!-- Pause Overlay -->
        <div id="pause-overlay" class="hidden">
            <div id="pause-content">
                <h2>PAUSED</h2>
                <button id="resume-btn" class="btn-primary">RESUME</button>
                <button id="quit-btn" class="btn-secondary">QUIT TO MENU</button>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loading-overlay" class="hidden">
            <div id="loading-content">
                <div class="loading-spinner"></div>
                <p id="loading-text">Analyzing beat pattern...</p>
            </div>
        </div>

        <!-- Tutorial Overlay -->
        <div id="tutorial-overlay" class="hidden">
            <div id="tutorial-content">
                <h3>HOW TO PLAY</h3>
                <p>Hit <strong>SPACEBAR</strong> or <strong>TAP</strong> on the beat!</p>
                <div class="tutorial-zones">
                    <div class="tutorial-zone perfect">PERFECT</div>
                    <div class="tutorial-zone good">GOOD</div>
                    <div class="tutorial-zone ok">OK</div>
                </div>
                <p>Match the rhythm as beats scroll toward the hit line.</p>
                <p>Build a <strong>6 combo</strong> to trigger <strong>FEVER mode</strong>!</p>
                <p class="tutorial-dismiss">Press any key or tap to start...</p>
            </div>
        </div>

        <!-- Results Screen (Practice) -->
        <div id="results-screen" class="screen">
            <h2 id="result-title">RESULTS</h2>
            <div id="final-scores">
                <div class="final-score-box">
                    <span class="final-label">YOUR SCORE</span>
                    <span id="final-player-score" class="final-value">0</span>
                </div>
                <div class="final-score-box">
                    <span class="final-label">RIVAL SCORE</span>
                    <span id="final-ai-score" class="final-value">0</span>
                </div>
            </div>
            <div id="result-message"></div>
            <div id="stats-display">
                <div class="stat">Perfect: <span id="stat-perfect">0</span></div>
                <div class="stat">Good: <span id="stat-good">0</span></div>
                <div class="stat">OK: <span id="stat-ok">0</span></div>
                <div class="stat">Miss: <span id="stat-miss">0</span></div>
                <div class="stat">Max Combo: <span id="stat-max-combo">0</span></div>
            </div>
            <div id="high-score-display" class="hidden">
                <span class="stat">Best: <span id="high-score-value">0</span></span>
            </div>
            <button id="play-again-btn" class="btn-primary">Play Again</button>
            <button id="change-chant-btn" class="btn-secondary">Change Chant</button>
        </div>

        <!-- Chant Result Screen (Match Day transition) -->
        <div id="chant-result-screen" class="screen">
            <div id="chant-result-scoreline">
                <span id="chant-result-player-goals">0</span>
                <span class="chant-result-sep">-</span>
                <span id="chant-result-ai-goals">0</span>
            </div>
            <div id="chant-result-message"></div>
            <div id="chant-result-detail"></div>
            <button id="next-chant-btn" class="btn-primary">NEXT CHANT</button>
        </div>

        <!-- Halftime Screen -->
        <div id="halftime-screen" class="screen">
            <h2>HALF TIME</h2>
            <div id="halftime-scoreline">
                <span id="halftime-player-goals">0</span>
                <span class="halftime-sep">-</span>
                <span id="halftime-ai-goals">0</span>
            </div>
            <div id="halftime-summary"></div>
            <button id="second-half-btn" class="btn-primary">SECOND HALF</button>
        </div>

        <!-- Fulltime Screen -->
        <div id="fulltime-screen" class="screen">
            <h2>FULL TIME</h2>
            <div id="fulltime-scoreline">
                <span id="fulltime-player-goals">0</span>
                <span class="fulltime-sep">-</span>
                <span id="fulltime-ai-goals">0</span>
            </div>
            <div id="fulltime-result-message"></div>
            <div id="fulltime-summary"></div>
            <button id="fulltime-play-again-btn" class="btn-primary">Play Again</button>
            <button id="fulltime-main-menu-btn" class="btn-secondary">Main Menu</button>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
